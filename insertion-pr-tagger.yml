parameters:
  - name: GitHubToken
    type: string
    default: ""
  - name: DevDivToken
    type: string
    default: ""
  - name: DncengToken
    type: string
    default: ""

pool:
  vmImage: 'ubuntu-latest'

stages:
- stage: tagInsertedPullRequest
  pool:
    vmImage: 'ubuntu-latest'
  jobs:
  - job: runPRTagger
    steps:
      - task: UseDotNet@2
      - script: dotnet tool install Microsoft.RoslynTools --prerelease --add-source https://pkgs.dev.azure.com/dnceng/public/_packaging/dotnet-eng/nuget/v3/index.json -g
        displayName: Install Roslyn Insertion Tool
      - script: roslyn-tools pr-tagger -b main-34602.64 -c 76ef32b4c79be68ee58633b9ff25e28be110ff43 --github-token ${{ parameters.GitHubToken }} --devdiv-azdo-token ${{ parameters.DevDivToken }} --dnceng-azdo-token ${{ parameters.DncengToken }}
        displayName: Run PR Tagger